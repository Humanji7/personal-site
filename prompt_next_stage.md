# Prompt: Sphere Bleeding Effect 2.0

## Контекст проекта

Интерактивная сфера из частиц (Three.js Points) для personal-site. Сфера — "живая душа", которая реагирует на действия пользователя.

**Расположение:** `/Users/admin/projects/personal-site/prototype-sphere/`

## Текущее состояние

### ✅ Работает
- **Rolling Physics** — сфера катится за курсором (`mesh.rotation.x/y` с инерцией 0.95 damping)
- **Breathing** — плавное колебание размера частиц через shader
- **Pause Effect** — дыхание замедляется при idle (Listening phase)
- **Color Tint** — потемнение + hue-shift при Tension

### ⚠️ Отключено (нужна переработка)
- **Bleeding** — механика "кровотечения" при frantic movement
  - Закомментировано в `Sphere.js` line 199

## Проблема с bleeding

Старая механика не работает с rolling:
1. Частицы падают в **локальном** пространстве mesh
2. Когда mesh вращается → частицы "зависают" визуально (gravity идёт не вниз)
3. После падения телепортируются обратно — нет плавности

## Задача

Придумать и реализовать **новую механику bleeding**, которая:
1. Работает **независимо** от mesh rotation
2. Передаёт эмоцию "боли/потери" при агрессивном взаимодействии
3. Выглядит органично и "живо"

## Варианты для рассмотрения

| Вариант | Описание | Сложность |
|---------|----------|-----------|
| **A: World-space gravity** | Конвертить позиции в world-space | Высокая |
| **B: Испарение** | Fade out → fade in на новой позиции | Средняя |
| **C: Орбитальный отрыв** | Частицы отлетают радиально, возвращаются по спирали | Средняя |
| **D: Shader-based** | Эффект полностью в шейдере через uniform | Средняя |
| **E: Только tremor** | Дрожь без падения | Низкая |

## Ключевые файлы

```
prototype-sphere/src/
├── Sphere.js          # Orchestrator, state machine (bleeding disabled line 199)
├── ParticleSystem.js  # Particles, shaders, physics
├── InputManager.js    # Mouse/touch input
└── main.js           # Entry point
```

## Запуск

```bash
cd prototype-sphere && npm run dev
# http://localhost:5173/
```

## Вопросы для обсуждения

1. Какой эмоциональный смысл у bleeding? Что оно должно передавать?
2. Должны ли частицы физически покидать сферу?
3. Какой вариант (A-E) кажется лучшим? Или есть другая идея?

---

**Начни с:** Прочитай `ParticleSystem.js` и `Sphere.js`, затем предложи конкретный план реализации выбранного варианта.
