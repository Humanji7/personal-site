# Sphere Face-to-Face Recognition

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–í–æ –≤—Ä–µ–º—è Hold-to-Recognize:
- ‚úÖ **–ì–ª–∞–∑ —Å–º–æ—Ç—Ä–∏—Ç** –Ω–∞ —Ç–æ—á–∫—É –∫–∞—Å–∞–Ω–∏—è (gaze lock —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚ùå **–°—Ñ–µ—Ä–∞ –Ω–µ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è** ‚Äî –æ—Å—Ç–∞—ë—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
- ‚ùå **–í–∏–∑—É–∞–ª—å–Ω–æ —Å–ª–∞–±–∞—è —Ä–µ–∞–∫—Ü–∏—è** ‚Äî –≥–ª–∞–∑ –º–æ–∂–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å "–≤–±–æ–∫" –æ—Ç –∫–∞–º–µ—Ä—ã, –∏ —ç—Ç–æ –Ω–µ –∑–∞–º–µ—Ç–Ω–æ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–º–µ–Ω—Ç —É–∑–Ω–∞–≤–∞–Ω–∏—è –≤—ã–≥–ª—è–¥–∏—Ç –Ω–µ–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ ‚Äî —Ç–æ–ª—å–∫–æ –≥–ª–∞–∑ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç, –∞ —Å—Ñ–µ—Ä–∞ –∫–∞–∫ –±—É–¥—Ç–æ –±–µ–∑—É—á–∞—Å—Ç–Ω–∞.

---

## üí° –ñ–µ–ª–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### –ò–¥–µ—è: "–û–Ω–∞ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∫ —Ç–µ–±–µ"

–í–æ –≤—Ä–µ–º—è **RECOGNITION —Ñ–∞–∑—ã** —Å—Ñ–µ—Ä–∞ –¥–æ–ª–∂–Ω–∞:

1. **–ú–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç—å—Å—è** —Ç–∞–∫, —á—Ç–æ–±—ã –≥–ª–∞–∑ –æ–∫–∞–∑–∞–ª—Å—è **face-to-face** —Å —Ç–æ—á–∫–æ–π –∫–∞—Å–∞–Ω–∏—è
2. **Freeze rolling** ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –æ–±—ã—á–Ω—É—é rolling –º–µ—Ö–∞–Ω–∏–∫—É –æ—Ç –∫—É—Ä—Å–æ—Ä–∞
3. **Smooth interpolation** ‚Äî –ø–ª–∞–≤–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è (2-3 —Å–µ–∫—É–Ω–¥—ã)
4. **Return to normal** ‚Äî –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ Recognition –≤–µ—Ä–Ω—É—Ç—å rolling

### –≠—Ñ—Ñ–µ–∫—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

> "–ö–æ–≥–¥–∞ —è –¥–µ—Ä–∂—É —Ä—É–∫—É –Ω–∞ —Å—Ñ–µ—Ä–µ, –æ–Ω–∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ **—Å–º–æ—Ç—Ä–∏—Ç** –Ω–∞ –º–µ–Ω—è ‚Äî –æ–Ω–∞ **–ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤—Å–µ–º —Ç–µ–ª–æ–º**, —á—Ç–æ–±—ã –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å—Å—è –≤–∑–≥–ª—è–¥–æ–º. –≠—Ç–æ –º–æ–º–µ–Ω—Ç –ø–æ–ª–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è."

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏

**–¶–µ–ª—å:** –ù–∞–π—Ç–∏ rotation —Å—Ñ–µ—Ä—ã, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –≥–ª–∞–∑ (–Ω–∞ —Å–µ–≤–µ—Ä–Ω–æ–º –ø–æ–ª—é—Å–µ) –±—É–¥–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ `recognitionTouchPos`.

```javascript
// –í Sphere.js, –≤–æ –≤—Ä–µ–º—è RECOGNITION —Ñ–∞–∑—ã
_computeFaceToFaceRotation(touchPos) {
  // –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç —Ü–µ–Ω—Ç—Ä–∞ —Å—Ñ–µ—Ä—ã –∫ —Ç–æ—á–∫–µ –∫–∞—Å–∞–Ω–∏—è
  const toTouch = touchPos.clone().normalize()
  
  // –ì–ª–∞–∑ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Å–µ–≤–µ—Ä–Ω–æ–º –ø–æ–ª—é—Å–µ (0, 0, 1)
  // –ù—É–∂–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç—å —Å—Ñ–µ—Ä—É —Ç–∞–∫, —á—Ç–æ–±—ã (0, 0, 1) —É–∫–∞–∑—ã–≤–∞–ª –Ω–∞ toTouch
  
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º quaternion –¥–ª—è –ø–ª–∞–≤–Ω–æ–π —Ä–æ—Ç–∞—Ü–∏–∏
  const currentUp = new THREE.Vector3(0, 0, 1)
  const targetRotation = new THREE.Quaternion()
  targetRotation.setFromUnitVectors(currentUp, toTouch)
  
  return targetRotation
}
```

### 2. –ü–ª–∞–≤–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –≤–æ –≤—Ä–µ–º—è Recognition

**–í `_processRecognition()`:**

```javascript
// –§–ê–ó–ê 2: –£–ó–ù–ê–í–ê–ù–ò–ï
if (t < cfg.pauseDuration + cfg.recognitionDuration) {
  const recogT = (t - cfg.pauseDuration) / cfg.recognitionDuration  // 0 ‚Üí 1
  
  // ... existing recognition logic ...
  
  // NEW: –ü–æ–≤–æ—Ä–æ—Ç —Å—Ñ–µ—Ä—ã –∫ —Ç–æ—á–∫–µ –∫–∞—Å–∞–Ω–∏—è
  if (!this.targetFaceRotation) {
    this.targetFaceRotation = this._computeFaceToFaceRotation(this.recognitionTouchPos)
  }
  
  // –ü–ª–∞–≤–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª–∞—Ü–∏—è rotation
  const currentQuat = new THREE.Quaternion().setFromEuler(this.particles.mesh.rotation)
  currentQuat.slerp(this.targetFaceRotation, delta * 0.8)  // Smooth interpolation
  this.particles.mesh.rotation.setFromQuaternion(currentQuat)
  
  // Sync eye rotation
  this.eye.setSphereRotation(this.particles.mesh.rotation)
}
```

### 3. Freeze rolling –≤–æ –≤—Ä–µ–º—è Recognition

**–í `_updateCursorProximity()`:**

```javascript
// Skip rolling if in RECOGNITION phase
if (this.currentPhase === PHASE.RECOGNITION) {
  return  // Don't apply cursor attraction/rolling
}

// ... existing rolling logic ...
```

### 4. Cleanup –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ Recognition

**–í `_exitRecognition()`:**

```javascript
_exitRecognition() {
  // Clear recognition state
  this.targetFaceRotation = null
  
  // ... existing cleanup ...
}
```

---

## üìã Checklist

### Phase 1: Core Rotation Logic
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `_computeFaceToFaceRotation(touchPos)`
- [ ] –î–æ–±–∞–≤–∏—Ç—å `this.targetFaceRotation` state variable
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å rotation interpolation –≤ `_processRecognition()`

### Phase 2: Disable Conflicting Mechanics
- [ ] Freeze rolling –≤ `_updateCursorProximity()` –≤–æ –≤—Ä–µ–º—è RECOGNITION
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ magnetism –Ω–µ –º–µ—à–∞–µ—Ç

### Phase 3: Cleanup & Testing
- [ ] Clear `targetFaceRotation` –≤ `_exitRecognition()`
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å: hold –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö —Å—Ñ–µ—Ä—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: –ø–ª–∞–≤–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–∞ –æ–±—Ä–∞—Ç–Ω–æ –∫ rolling –ø–æ—Å–ª–µ exit

---

## üé® –¢—é–Ω–∏–Ω–≥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```javascript
recognitionConfig: {
  // ... existing ...
  
  // NEW: Face-to-face rotation
  faceRotationSpeed: 0.8,     // slerp factor (0-1, higher = faster)
  faceRotationDelay: 0.3,     // delay before starting rotation (seconds)
}
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã behaviour:

1. **Immediate turn** ‚Äî —Å—Ñ–µ—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è —Å—Ä–∞–∑—É –≤ PAUSE —Ñ–∞–∑–µ
2. **Delayed turn** ‚Äî –ø–æ–≤–æ—Ä–æ—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ RECOGNITION —Ñ–∞–∑–µ
3. **Gradual turn** ‚Äî –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –≤—Å–µ–≥–æ hold

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

### Manual test scenario:

1. Reload page
2. Hold –Ω–∞ **–ª–µ–≤–æ–π** —Å—Ç–æ—Ä–æ–Ω–µ —Å—Ñ–µ—Ä—ã (3+ —Å–µ–∫—É–Ω–¥—ã)
3. **–û–∂–∏–¥–∞–Ω–∏–µ:** –°—Ñ–µ—Ä–∞ –º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è —Ç–∞–∫, —á—Ç–æ–±—ã –≥–ª–∞–∑ —Å–º–æ—Ç—Ä–µ–ª –Ω–∞ —Ç–æ—á–∫—É –∫–∞—Å–∞–Ω–∏—è
4. Release
5. **–û–∂–∏–¥–∞–Ω–∏–µ:** Rolling –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ

### Success criteria:

‚úÖ –°—Ñ–µ—Ä–∞ –ø–ª–∞–≤–Ω–æ –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è Recognition  
‚úÖ –ì–ª–∞–∑ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ª–∏—Ü–æ–º" –∫ —Ç–æ—á–∫–µ –∫–∞—Å–∞–Ω–∏—è  
‚úÖ –ü–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ rolling —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ  
‚úÖ –ù–µ—Ç —Ä–µ–∑–∫–∏—Ö —Å–∫–∞—á–∫–æ–≤ rotation  

---

## ü§î –û—Ç–∫—Ä—ã—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

1. **–°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–≤–æ—Ä–æ—Ç–∞** ‚Äî –Ω–∞—Å–∫–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä–æ? (–ø—Ä–µ–¥–ª–∞–≥–∞—é –º–µ–¥–ª–µ–Ω–Ω–æ, 2-3 —Å–µ–∫)
2. **–ö–æ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞—Ç—å** ‚Äî –≤ PAUSE –∏–ª–∏ –≤ RECOGNITION —Ñ–∞–∑–µ?
3. **Easing** ‚Äî linear slerp –∏–ª–∏ custom easing curve?
4. **Partial rotation** ‚Äî –ø–æ–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –Ω–∞ 100% –∏–ª–∏ –Ω–∞ ~70% (—á—É—Ç—å –Ω–µ–¥–æ–∫—Ä—É—Ç–∏—Ç—å –¥–ª—è organic feel)?
